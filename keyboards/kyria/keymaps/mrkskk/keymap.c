#include  "sendstring_danish_fixed.h"
#include "mrkskk.h"

#if defined(COMBO_ENABLE)
#include "g/keymap_combo.h" // to make combo def dictionary work
#endif


// layer_state_t layer_state_set_user(layer_state_t state) {
//  state = update_tri_layer_state(state, NUMPAD, SYMBOLS, ADJUST);
//  return state;
// };

void matrix_scan_user(void)
{
#if defined(ENCODER_ENABLE)
    matrix_scan_encoders();
#endif
#if defined(LEADER_ENABLE)
    matrix_scan_leader();
#endif
}

bool get_tapping_force_hold(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        case LSFT_A:
        case LCTL_X:
        case LALT_C:
        //case RSFT_AE:
        case RSFT_QT:
        case LALT_COM:
        case RCTL_DOT:
            return true;
        default:
            return false;
    }
}

//Setting per key tapping term.
uint16_t get_tapping_term(uint16_t keycode, keyrecord_t *record) {
    switch (keycode) {
        case LSFT_A:
        case RSFT_QT:
        //case RSFT_AE:
            return TAPPING_TERM + 100; // 275
        case LCTL_X:
        case LALT_C:
        case LALT_COM:
        case RCTL_DOT:
            return TAPPING_TERM + 125; // 175+125=300
        default:
            return TAPPING_TERM;       // 175
    }
}


#ifdef COMBO_ENABLE
bool get_combo_must_tap(uint16_t index, combo_t *combo) {
    // If you want all combos to be tap-only, just uncomment the next line
    // return true

    // If you want *all* combos, that have Mod-Tap/Layer-Tap/Momentary keys in its chord, to be tap-only, this is for you:
    uint16_t key;
    uint8_t idx = 0;
    while ((key = pgm_read_word(&combo->keys[idx])) != COMBO_END) {
        switch (key) {
            case QK_MOD_TAP...QK_MOD_TAP_MAX:
            //case QK_LAYER_TAP...QK_LAYER_TAP_MAX: // If this is enabled the LT(SHORCUTS,KC_F2) key does not work.
            case QK_MOMENTARY...QK_MOMENTARY_MAX:
                return true;
        }
        idx += 1;
    }
    return false;

}

uint16_t get_combo_term(uint16_t index, combo_t *combo) {
    switch (index) {
        case ROLL_AE:
        case ROLL_OE:
        case ROLL_AA:
            return 700;
        case AE_AE:
        case OE_OE:
        case AO_AA:
        case COMBO_BSPC_W:
        case COMBO_DEL_W:
        case COMBO_SHORTCUTS_F2:
        case COMBO_OSM_SHIFT:
        default:
            return COMBO_TERM;
    }
    }
#endif

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] =
{
    [QWERTY] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
     ____,    KC_Q,     KC_W,    KC_E,   KC_R,    KC_T,                                           KC_Y,    KC_U,   KC_I,     KC_O,     KC_P,    ____,
// |--------+--------+--------+--------+--------+--PGup--|                                      |--------+--------+--------+--------+--------+--------|
     ____,    LSFT_A,   ADJ_S,   NUM_D,  SYM_F,   KC_G,                                           KC_H,    SYM_J,  KC_K,     KC_L,   RSFT_QT,   ____,
// |--------+--------+--------+-------tab-------+--PGdn--+--------+--------|  |--------+--------+--------+-------esc-------+--------+--------+--------|
     ____,    KC_Z,     LCTL_X,  LALT_C, KC_V,    KC_B,    FIND,   CAPSWRD,    SCR_SHOT, ____,    KC_N,    KC_M,   LALT_COM, RCTL_DOT, MINUS,   ____,
// |--------+--------+--------+--------+--------+--------+-SC-F2--+--------|  |-BSPC_W-+--------+--------+--------+--------+--------+--------+--------|
                                  ____,  KC_LGUI, NUMBER,  NVSPC,  SP_LEAD,    KC_BSPC,   NVENT,  SYMBOL,    ____,    ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),

    [COLEMAK_DH] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    ____,     KC_Q,     KC_W,    KC_F,   KC_P,    KC_B,                                           KC_J,    KC_L,   KC_U,     KC_Y,     DK_AE,  DK_AA,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____,     LSFT_A,   ADJ_R,   NUM_S,  SYM_T,   KC_G,                                           KC_M,    SYM_N,  KC_E,     KC_I,     KC_O,   DK_OE,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____,     KC_Z,     LCTL_X,  LALT_C, KC_D,    KC_V,    FIND,   CAPSWRD,    SCR_SHOT,  ____,    KC_K,    KC_H,   LALT_COM, RCTL_DOT, MINUS,  ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
                                 ____,   KC_LGUI, NUMBER,    NVSPC,  SP_LEAD,    KC_BSPC, NVENT, SYMBOL, ____,   ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),

    [NUMPAD] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    ____  ,   ____,     ____,   ____,    ____,    ____,                                            SLSH,  KC_7,     KC_8,    KC_9,     KC_0,  ____,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____ ,    ____,     ____,   ____,    ____,    ____,                                            ASTR,  KC_4,     KC_5,    KC_6,     PLUS,  ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____ ,    ____,     ____,   ____,    ____,    ____,     ____,    ____,       ____,  ____,     KC_DOT, KC_1,     KC_2,    KC_3,     MINUS,   ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
                                 CAD,    ____ ,   ____,     ____,    ____,       ____,    EQL,    ____,   ____,     ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),

    [L_SYMBOLS] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    ____,    EXLM,      DQUO,   LCB,     RCB,     PERC,                                              SLSH,     BSLH,   LABK,   RABK,   EQL,    ____,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____,    AT,        TILD,   LPRN,    RPRN,    HASH,                                              ASTR,     QUOT,   ACUT,   GRV,    PIPE,   ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____,    HAT,       DIAE,   LBRC,    RBRC,    QUES,    ____,     ____,       ____,    ____,    EN_EM_DSH, AMPR,   SEMCOL,  COL,    UNDSC,  ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
                                 CAD,    ____,    ____,   ____,      ____,       ____,    ____,     ____,  ____,     ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),

    [R_SYMBOLS] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    ____,    EXLM,      DQUO,   LCB,     RCB,     PERC,                                           SLSH,     BSLH,   LABK,     RABK,    EQL,    ____,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____,    AT,        TILD,   LPRN,    RPRN,    HASH,                                           ASTR,     QUOT,   ACUT,     GRV,     PIPE,   ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____,    HAT,       DIAE,   LBRC,    RBRC,    QUES,    ____,      ____,       ____,    ____,  EN_EM_DSH, AMPR,   SEMCOL,  COL,     UNDSC,  ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
                                  CAD,    ____,    ____,   ____,      ____,      ____,    ____,     ____,  ____,     ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),

    [NAV] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    ____,    ____,     ____,    ____,   PRV_TAB,  ____,                                           ____,    PRVW,    KC_UP,   NXTW,    ZOOMIN,  ____,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____,    ____,     ____,   NUMBER,   NXT_TAB,  ____,                                           ____,    KC_LEFT, KC_DOWN, KC_RGHT, ZOOMOUT, ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____,    ____,     CUT,     COPY,   PASTE,    ____,    ____,    ____,        ____,    ____,   ____,    ____,    ____,    ____,    ____,   ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |-DEL_W--+--------+--------+--------+--------+--------+--------+--------|
                                SLEEP,   ____,     ____,    ____,    ____,        DEL,     ____,   ____,    ____,    ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),
    [ADJUST] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    TG_OS,   QWERT ,   ____,    ____,    ____,    ____,                                           ____,     KC_F7,  KC_F8,   KC_F9,   KC_F12, ____,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____,    ____,     ____,    KC_LALT, ____,    ____,                                           ____,     KC_F4,  KC_F5,   KC_F6,   KC_F11, ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____,    ____,     ____,    COLEM,   ____,    ____,    ____,    ____,        ____,   ____,    ____,     KC_F1,  KC_F2,  KC_F3,    KC_F10, ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
                                  CAD,    ____,    ____,   ____,      ____,      ____,   ____,    ____,     ____,   ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),

//
    [SHORTCUTS] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    ____,    ____,     ____,    ____,    ____,    ____,                                           KC_HOME, PRVW,    S_UP_W,  NXTW,     ____,  ____,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____,    ACPT,     SIGN,    ____,    ____,    ____,                                           KC_END,  S_PRVW,  S_DN_W, S_NXTW,    ____,  ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____,    ____,     ____,    ____,    ____,    ____,    ____,    ____,        ____,   ____,    ____,    ____,    ____,    ____,     ____,   ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
                                  CAD,    ____,    ____,   ____,      ____,      ____,   ____,    ____,     ____,   ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),
/*
//
    [TEMPLATE] = LAYOUT(
 //.--------+--------+--------+--------+--------+--------.                                      .--------+--------+--------+--------+--------+--------.
    ____,    ____,     ____,    ____,    ____,    ____,                                           ____,     ____,    ____,   ____,    ____,  ____,
// |--------+--------+--------+--------+--------+--------|                                      |--------+--------+--------+--------+--------+--------|
    ____,    ____,     ____,    ____,    ____,    ____,                                           ____,     ____,    ____,   ____,    ____,  ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
    ____,    ____,     ____,    ____,    ____,    ____,    ____,    ____,        ____,   ____,    ____,    ____,    ____,    ____,     ____,   ____,
// |--------+--------+--------+--------+--------+--------+--------+--------|  |--------+--------+--------+--------+--------+--------+--------+--------|
                                ____,    ____,    ____,   ____,      ____,      ____,   ____,    ____,     ____,   ____
 //                           '--------+--------+--------+--------+--------'  '--------+--------+--------+--------+--------'
    ),
*/


};
